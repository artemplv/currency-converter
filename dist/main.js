!function(){var n={381:function(){HTMLElement.prototype.siblings=function(){return function(n,t){const e=[];for(;n;n=n.nextSibling)1===n.nodeType&&n!==t&&e.push(n);return e}(this.parentNode.firstChild,this)}}},t={};function e(i){var r=t[i];if(void 0!==r)return r.exports;var o=t[i]={exports:{}};return n[i](o,o.exports,e),o.exports}!function(){"use strict";e(381);var n=1e-6,t=1e-12,i=Math.PI,r=i/2,o=i/4,u=2*i,a=180/i,c=i/180,l=Math.abs,s=Math.atan,f=Math.atan2,h=Math.cos,p=(Math.ceil,Math.exp,Math.floor,Math.hypot,Math.log,Math.pow,Math.sin),d=Math.sign||function(n){return n>0?1:n<0?-1:0},v=Math.sqrt;function g(n){return n>1?r:n<-1?-r:Math.asin(n)}function y(){}function m(){var n,t=[];return{point:function(t,e,i){n.push([t,e,i])},lineStart:function(){t.push(n=[])},lineEnd:y,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var e=t;return t=[],n=null,e}}}function S(t,e){return l(t[0]-e[0])<n&&l(t[1]-e[1])<n}function E(n,t,e,i){this.x=n,this.z=t,this.o=e,this.e=i,this.v=!1,this.n=this.p=null}function w(t,e,i,r,o){var u,a,c=[],l=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,i,r=t[0],a=t[e];if(S(r,a)){if(!r[2]&&!a[2]){for(o.lineStart(),u=0;u<e;++u)o.point((r=t[u])[0],r[1]);return void o.lineEnd()}a[0]+=2*n}c.push(i=new E(r,t,null,!0)),l.push(i.o=new E(r,null,i,!1)),c.push(i=new E(a,t,null,!1)),l.push(i.o=new E(a,null,i,!0))}})),c.length){for(l.sort(e),M(c),M(l),u=0,a=l.length;u<a;++u)l[u].e=i=!i;for(var s,f,h=c[0];;){for(var p=h,d=!0;p.v;)if((p=p.n)===h)return;s=p.z,o.lineStart();do{if(p.v=p.o.v=!0,p.e){if(d)for(u=0,a=s.length;u<a;++u)o.point((f=s[u])[0],f[1]);else r(p.x,p.n.x,1,o);p=p.n}else{if(d)for(s=p.p.z,u=s.length-1;u>=0;--u)o.point((f=s[u])[0],f[1]);else r(p.x,p.p.x,-1,o);p=p.p}s=(p=p.o).z,d=!d}while(!p.v);o.lineEnd()}}}function M(n){if(t=n.length){for(var t,e,i=0,r=n[0];++i<t;)r.n=e=n[i],e.p=r,r=e;r.n=e=n[0],e.p=r}}Math.tan;class _{constructor(){this._partials=new Float64Array(32),this._n=0}add(n){const t=this._partials;let e=0;for(let i=0;i<this._n&&i<32;i++){const r=t[i],o=n+r,u=Math.abs(n)<Math.abs(r)?n-(o-r):r-(o-n);u&&(t[e++]=u),n=o}return t[e]=n,this._n=e+1,this}valueOf(){const n=this._partials;let t,e,i,r=this._n,o=0;if(r>0){for(o=n[--r];r>0&&(t=o,e=n[--r],o=t+e,i=e-(o-t),!i););r>0&&(i<0&&n[r-1]<0||i>0&&n[r-1]>0)&&(e=2*i,t=o+e,e==t-o&&(o=t))}return o}}function x(n){return[f(n[1],n[0]),g(n[2])]}function C(n){var t=n[0],e=n[1],i=h(e);return[i*h(t),i*p(t),p(e)]}function N(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function b(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function L(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function $(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function P(n){var t=v(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}function j(n){return l(n[0])<=i?n[0]:d(n[0])*((l(n[0])+i)%u-i)}function k(e,a){var c=j(a),l=a[1],s=p(l),d=[p(c),-h(c),0],v=0,y=0,m=new _;1===s?l=r+n:-1===s&&(l=-r-n);for(var S=0,E=e.length;S<E;++S)if(M=(w=e[S]).length)for(var w,M,x=w[M-1],N=j(x),L=x[1]/2+o,$=p(L),k=h(L),T=0;T<M;++T,N=D,$=A,k=F,x=R){var R=w[T],D=j(R),z=R[1]/2+o,A=p(z),F=h(z),G=D-N,O=G>=0?1:-1,U=O*G,Y=U>i,q=$*A;if(m.add(f(q*O*p(U),k*F+q*h(U))),v+=Y?G+O*u:G,Y^N>=c^D>=c){var X=b(C(x),C(R));P(X);var Z=b(d,X);P(Z);var H=(Y^G>=0?-1:1)*g(Z[2]);(l>H||l===H&&(X[0]||X[1]))&&(y+=Y^G>=0?1:-1)}}return(v<-n||v<n&&m<-t)^1&y}function T(n){return Array.from(function*(n){for(const t of n)yield*t}(n))}function R(n,t,e,i){return function(r){var o,u,a,c=t(r),l=m(),s=t(l),f=!1,h={point:p,lineStart:v,lineEnd:g,polygonStart:function(){h.point=y,h.lineStart=S,h.lineEnd=E,u=[],o=[]},polygonEnd:function(){h.point=p,h.lineStart=v,h.lineEnd=g,u=T(u);var n=k(o,i);u.length?(f||(r.polygonStart(),f=!0),w(u,z,n,e,r)):n&&(f||(r.polygonStart(),f=!0),r.lineStart(),e(null,null,1,r),r.lineEnd()),f&&(r.polygonEnd(),f=!1),u=o=null},sphere:function(){r.polygonStart(),r.lineStart(),e(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function p(t,e){n(t,e)&&r.point(t,e)}function d(n,t){c.point(n,t)}function v(){h.point=d,c.lineStart()}function g(){h.point=p,c.lineEnd()}function y(n,t){a.push([n,t]),s.point(n,t)}function S(){s.lineStart(),a=[]}function E(){y(a[0][0],a[0][1]),s.lineEnd();var n,t,e,i,c=s.clean(),h=l.result(),p=h.length;if(a.pop(),o.push(a),a=null,p)if(1&c){if((t=(e=h[0]).length-1)>0){for(f||(r.polygonStart(),f=!0),r.lineStart(),n=0;n<t;++n)r.point((i=e[n])[0],i[1]);r.lineEnd()}}else p>1&&2&c&&h.push(h.pop().concat(h.shift())),u.push(h.filter(D))}return h}}function D(n){return n.length>1}function z(t,e){return((t=t.x)[0]<0?t[1]-r-n:r-t[1])-((e=e.x)[0]<0?e[1]-r-n:r-e[1])}var A=R((function(){return!0}),(function(t){var e,o=NaN,u=NaN,a=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(c,f){var d=c>0?i:-i,v=l(c-o);l(v-i)<n?(t.point(o,u=(u+f)/2>0?r:-r),t.point(a,u),t.lineEnd(),t.lineStart(),t.point(d,u),t.point(c,u),e=0):a!==d&&v>=i&&(l(o-a)<n&&(o-=a*n),l(c-d)<n&&(c-=d*n),u=function(t,e,i,r){var o,u,a=p(t-i);return l(a)>n?s((p(e)*(u=h(r))*p(i)-p(r)*(o=h(e))*p(t))/(o*u*a)):(e+r)/2}(o,u,c,f),t.point(a,u),t.lineEnd(),t.lineStart(),t.point(d,u),e=0),t.point(o=c,u=f),a=d},lineEnd:function(){t.lineEnd(),o=u=NaN},clean:function(){return 2-e}}}),(function(t,e,o,u){var a;if(null==t)a=o*r,u.point(-i,a),u.point(0,a),u.point(i,a),u.point(i,0),u.point(i,-a),u.point(0,-a),u.point(-i,-a),u.point(-i,0),u.point(-i,a);else if(l(t[0]-e[0])>n){var c=t[0]<e[0]?i:-i;a=o*c/2,u.point(-c,a),u.point(0,a),u.point(c,a)}else u.point(e[0],e[1])}),[-i,-r]);function F(t,e){(e=C(e))[0]-=t,P(e);var r,o=(r=-e[1])>1?0:r<-1?i:Math.acos(r);return((-e[2]<0?-o:o)+u-n)%u}var G=1e9,O=-G;function U(n,t){function e(e,i){return e=n(e,i),t(e[0],e[1])}return n.invert&&t.invert&&(e.invert=function(e,i){return(e=t.invert(e,i))&&n.invert(e[0],e[1])}),e}var Y=n=>n;function q(n,t){return l(n)>i&&(n-=Math.round(n/u)*u),[n,t]}function X(n){return function(t,e){return l(t+=n)>i&&(t-=Math.round(t/u)*u),[t,e]}}function Z(n){var t=X(n);return t.invert=X(-n),t}function H(n,t){var e=h(n),i=p(n),r=h(t),o=p(t);function u(n,t){var u=h(t),a=h(n)*u,c=p(n)*u,l=p(t),s=l*e+a*i;return[f(c*r-s*o,a*e-l*i),g(s*r+c*o)]}return u.invert=function(n,t){var u=h(t),a=h(n)*u,c=p(n)*u,l=p(t),s=l*r-c*o;return[f(c*r+l*o,a*e+s*i),g(s*e-a*i)]},u}function V(n){return function(t){var e=new W;for(var i in n)e[i]=n[i];return e.stream=t,e}}function W(){}function B(n,t){n&&K.hasOwnProperty(n.type)&&K[n.type](n,t)}q.invert=q,W.prototype={constructor:W,point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var I={Feature:function(n,t){B(n.geometry,t)},FeatureCollection:function(n,t){for(var e=n.features,i=-1,r=e.length;++i<r;)B(e[i].geometry,t)}},K={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var e=n.coordinates,i=-1,r=e.length;++i<r;)n=e[i],t.point(n[0],n[1],n[2])},LineString:function(n,t){J(n.coordinates,t,0)},MultiLineString:function(n,t){for(var e=n.coordinates,i=-1,r=e.length;++i<r;)J(e[i],t,0)},Polygon:function(n,t){Q(n.coordinates,t)},MultiPolygon:function(n,t){for(var e=n.coordinates,i=-1,r=e.length;++i<r;)Q(e[i],t)},GeometryCollection:function(n,t){for(var e=n.geometries,i=-1,r=e.length;++i<r;)B(e[i],t)}};function J(n,t,e){var i,r=-1,o=n.length-e;for(t.lineStart();++r<o;)i=n[r],t.point(i[0],i[1],i[2]);t.lineEnd()}function Q(n,t){var e=-1,i=n.length;for(t.polygonStart();++e<i;)J(n[e],t,1);t.polygonEnd()}function nn(n,t){n&&I.hasOwnProperty(n.type)?I[n.type](n,t):B(n,t)}var tn=1/0,en=tn,rn=-tn,on=rn,un={point:function(n,t){n<tn&&(tn=n),n>rn&&(rn=n),t<en&&(en=t),t>on&&(on=t)},lineStart:y,lineEnd:y,polygonStart:y,polygonEnd:y,result:function(){var n=[[tn,en],[rn,on]];return rn=on=-(en=tn=1/0),n}},an=un;function cn(n,t,e){var i=n.clipExtent&&n.clipExtent();return n.scale(150).translate([0,0]),null!=i&&n.clipExtent(null),nn(e,n.stream(an)),t(an.result()),null!=i&&n.clipExtent(i),n}function ln(n,t,e){return cn(n,(function(e){var i=t[1][0]-t[0][0],r=t[1][1]-t[0][1],o=Math.min(i/(e[1][0]-e[0][0]),r/(e[1][1]-e[0][1])),u=+t[0][0]+(i-o*(e[1][0]+e[0][0]))/2,a=+t[0][1]+(r-o*(e[1][1]+e[0][1]))/2;n.scale(150*o).translate([u,a])}),e)}var sn=16,fn=h(30*c);function hn(t,e){return+e?function(t,e){function i(r,o,u,a,c,s,h,p,d,y,m,S,E,w){var M=h-r,_=p-o,x=M*M+_*_;if(x>4*e&&E--){var C=a+y,N=c+m,b=s+S,L=v(C*C+N*N+b*b),$=g(b/=L),P=l(l(b)-1)<n||l(u-d)<n?(u+d)/2:f(N,C),j=t(P,$),k=j[0],T=j[1],R=k-r,D=T-o,z=_*R-M*D;(z*z/x>e||l((M*R+_*D)/x-.5)>.3||a*y+c*m+s*S<fn)&&(i(r,o,u,a,c,s,k,T,P,C/=L,N/=L,b,E,w),w.point(k,T),i(k,T,P,C,N,b,h,p,d,y,m,S,E,w))}}return function(n){var e,r,o,u,a,c,l,s,f,h,p,d,v={point:g,lineStart:y,lineEnd:S,polygonStart:function(){n.polygonStart(),v.lineStart=E},polygonEnd:function(){n.polygonEnd(),v.lineStart=y}};function g(e,i){e=t(e,i),n.point(e[0],e[1])}function y(){s=NaN,v.point=m,n.lineStart()}function m(e,r){var o=C([e,r]),u=t(e,r);i(s,f,l,h,p,d,s=u[0],f=u[1],l=e,h=o[0],p=o[1],d=o[2],sn,n),n.point(s,f)}function S(){v.point=g,n.lineEnd()}function E(){y(),v.point=w,v.lineEnd=M}function w(n,t){m(e=n,t),r=s,o=f,u=h,a=p,c=d,v.point=m}function M(){i(s,f,l,h,p,d,r,o,e,u,a,c,sn,n),v.lineEnd=S,S()}return v}}(t,e):function(n){return V({point:function(t,e){t=n(t,e),this.stream.point(t[0],t[1])}})}(t)}var pn,dn=V({point:function(n,t){this.stream.point(n*c,t*c)}});function vn(n,t,e,i,r,o){if(!o)return function(n,t,e,i,r){function o(o,u){return[t+n*(o*=i),e-n*(u*=r)]}return o.invert=function(o,u){return[(o-t)/n*i,(e-u)/n*r]},o}(n,t,e,i,r);var u=h(o),a=p(o),c=u*n,l=a*n,s=u/n,f=a/n,d=(a*e-u*t)/n,v=(a*t+u*e)/n;function g(n,o){return[c*(n*=i)-l*(o*=r)+t,e-l*n-c*o]}return g.invert=function(n,t){return[i*(s*n-f*t+d),r*(v-f*n-s*t)]},g}function gn(t){return function(t){var e,r,o,s,f,d,g,y,E,M,_=150,P=480,j=250,k=0,D=0,z=0,X=0,W=0,B=0,I=1,K=1,J=null,Q=A,nn=null,tn=Y,en=.5;function rn(n){return y(n[0]*c,n[1]*c)}function on(n){return(n=y.invert(n[0],n[1]))&&[n[0]*a,n[1]*a]}function un(){var n=vn(_,0,0,I,K,B).apply(null,e(k,D)),t=vn(_,P-n[0],j-n[1],I,K,B);return r=function(n,t,e){return(n%=u)?t||e?U(Z(n),H(t,e)):Z(n):t||e?H(t,e):q}(z,X,W),g=U(e,t),y=U(r,g),d=hn(g,en),an()}function an(){return E=M=null,rn}return rn.stream=function(n){return E&&M===n?E:E=dn(function(n){return V({point:function(t,e){var i=n(t,e);return this.stream.point(i[0],i[1])}})}(r)(Q(d(tn(M=n)))))},rn.preclip=function(n){return arguments.length?(Q=n,J=void 0,an()):Q},rn.postclip=function(n){return arguments.length?(tn=n,nn=o=s=f=null,an()):tn},rn.clipAngle=function(t){return arguments.length?(Q=+t?function(t){var e=h(t),r=6*c,o=e>0,a=l(e)>n;function s(n,t){return h(n)*h(t)>e}function f(t,r,o){var u=[1,0,0],a=b(C(t),C(r)),c=N(a,a),s=a[0],f=c-s*s;if(!f)return!o&&t;var h=e*c/f,p=-e*s/f,d=b(u,a),g=$(u,h);L(g,$(a,p));var y=d,m=N(g,y),S=N(y,y),E=m*m-S*(N(g,g)-1);if(!(E<0)){var w=v(E),M=$(y,(-m-w)/S);if(L(M,g),M=x(M),!o)return M;var _,P=t[0],j=r[0],k=t[1],T=r[1];j<P&&(_=P,P=j,j=_);var R=j-P,D=l(R-i)<n;if(!D&&T<k&&(_=k,k=T,T=_),D||R<n?D?k+T>0^M[1]<(l(M[0]-P)<n?k:T):k<=M[1]&&M[1]<=T:R>i^(P<=M[0]&&M[0]<=j)){var z=$(y,(-m+w)/S);return L(z,g),[M,x(z)]}}}function d(n,e){var r=o?t:i-t,u=0;return n<-r?u|=1:n>r&&(u|=2),e<-r?u|=4:e>r&&(u|=8),u}return R(s,(function(n){var t,e,r,u,c;return{lineStart:function(){u=r=!1,c=1},point:function(l,h){var p,v=[l,h],g=s(l,h),y=o?g?0:d(l,h):g?d(l+(l<0?i:-i),h):0;if(!t&&(u=r=g)&&n.lineStart(),g!==r&&(!(p=f(t,v))||S(t,p)||S(v,p))&&(v[2]=1),g!==r)c=0,g?(n.lineStart(),p=f(v,t),n.point(p[0],p[1])):(p=f(t,v),n.point(p[0],p[1],2),n.lineEnd()),t=p;else if(a&&t&&o^g){var m;y&e||!(m=f(v,t,!0))||(c=0,o?(n.lineStart(),n.point(m[0][0],m[0][1]),n.point(m[1][0],m[1][1]),n.lineEnd()):(n.point(m[1][0],m[1][1]),n.lineEnd(),n.lineStart(),n.point(m[0][0],m[0][1],3)))}!g||t&&S(t,v)||n.point(v[0],v[1]),t=v,r=g,e=y},lineEnd:function(){r&&n.lineEnd(),t=null},clean:function(){return c|(u&&r)<<1}}}),(function(n,e,i,o){!function(n,t,e,i,r,o){if(e){var a=h(t),c=p(t),l=i*e;null==r?(r=t+i*u,o=t-l/2):(r=F(a,r),o=F(a,o),(i>0?r<o:r>o)&&(r+=i*u));for(var s,f=r;i>0?f>o:f<o;f-=l)s=x([a,-c*h(f),-c*p(f)]),n.point(s[0],s[1])}}(o,t,r,i,n,e)}),o?[0,-t]:[-i,t-i])}(J=t*c):(J=null,A),an()):J*a},rn.clipExtent=function(t){return arguments.length?(tn=null==t?(nn=o=s=f=null,Y):function(t,e,i,r){function o(n,o){return t<=n&&n<=i&&e<=o&&o<=r}function u(n,o,u,c){var l=0,f=0;if(null==n||(l=a(n,u))!==(f=a(o,u))||s(n,o)<0^u>0)do{c.point(0===l||3===l?t:i,l>1?r:e)}while((l=(l+u+4)%4)!==f);else c.point(o[0],o[1])}function a(r,o){return l(r[0]-t)<n?o>0?0:3:l(r[0]-i)<n?o>0?2:1:l(r[1]-e)<n?o>0?1:0:o>0?3:2}function c(n,t){return s(n.x,t.x)}function s(n,t){var e=a(n,1),i=a(t,1);return e!==i?e-i:0===e?t[1]-n[1]:1===e?n[0]-t[0]:2===e?n[1]-t[1]:t[0]-n[0]}return function(n){var a,l,s,f,h,p,d,v,g,y,S,E=n,M=m(),_={point:x,lineStart:function(){_.point=C,l&&l.push(s=[]),y=!0,g=!1,d=v=NaN},lineEnd:function(){a&&(C(f,h),p&&g&&M.rejoin(),a.push(M.result())),_.point=x,g&&E.lineEnd()},polygonStart:function(){E=M,a=[],l=[],S=!0},polygonEnd:function(){var e=function(){for(var n=0,e=0,i=l.length;e<i;++e)for(var o,u,a=l[e],c=1,s=a.length,f=a[0],h=f[0],p=f[1];c<s;++c)o=h,u=p,h=(f=a[c])[0],p=f[1],u<=r?p>r&&(h-o)*(r-u)>(p-u)*(t-o)&&++n:p<=r&&(h-o)*(r-u)<(p-u)*(t-o)&&--n;return n}(),i=S&&e,o=(a=T(a)).length;(i||o)&&(n.polygonStart(),i&&(n.lineStart(),u(null,null,1,n),n.lineEnd()),o&&w(a,c,e,u,n),n.polygonEnd()),E=n,a=l=s=null}};function x(n,t){o(n,t)&&E.point(n,t)}function C(n,u){var a=o(n,u);if(l&&s.push([n,u]),y)f=n,h=u,p=a,y=!1,a&&(E.lineStart(),E.point(n,u));else if(a&&g)E.point(n,u);else{var c=[d=Math.max(O,Math.min(G,d)),v=Math.max(O,Math.min(G,v))],m=[n=Math.max(O,Math.min(G,n)),u=Math.max(O,Math.min(G,u))];!function(n,t,e,i,r,o){var u,a=n[0],c=n[1],l=0,s=1,f=t[0]-a,h=t[1]-c;if(u=e-a,f||!(u>0)){if(u/=f,f<0){if(u<l)return;u<s&&(s=u)}else if(f>0){if(u>s)return;u>l&&(l=u)}if(u=r-a,f||!(u<0)){if(u/=f,f<0){if(u>s)return;u>l&&(l=u)}else if(f>0){if(u<l)return;u<s&&(s=u)}if(u=i-c,h||!(u>0)){if(u/=h,h<0){if(u<l)return;u<s&&(s=u)}else if(h>0){if(u>s)return;u>l&&(l=u)}if(u=o-c,h||!(u<0)){if(u/=h,h<0){if(u>s)return;u>l&&(l=u)}else if(h>0){if(u<l)return;u<s&&(s=u)}return l>0&&(n[0]=a+l*f,n[1]=c+l*h),s<1&&(t[0]=a+s*f,t[1]=c+s*h),!0}}}}}(c,m,t,e,i,r)?a&&(E.lineStart(),E.point(n,u),S=!1):(g||(E.lineStart(),E.point(c[0],c[1])),E.point(m[0],m[1]),a||E.lineEnd(),S=!1)}d=n,v=u,g=a}return _}}(nn=+t[0][0],o=+t[0][1],s=+t[1][0],f=+t[1][1]),an()):null==nn?null:[[nn,o],[s,f]]},rn.scale=function(n){return arguments.length?(_=+n,un()):_},rn.translate=function(n){return arguments.length?(P=+n[0],j=+n[1],un()):[P,j]},rn.center=function(n){return arguments.length?(k=n[0]%360*c,D=n[1]%360*c,un()):[k*a,D*a]},rn.rotate=function(n){return arguments.length?(z=n[0]%360*c,X=n[1]%360*c,W=n.length>2?n[2]%360*c:0,un()):[z*a,X*a,W*a]},rn.angle=function(n){return arguments.length?(B=n%360*c,un()):B*a},rn.reflectX=function(n){return arguments.length?(I=n?-1:1,un()):I<0},rn.reflectY=function(n){return arguments.length?(K=n?-1:1,un()):K<0},rn.precision=function(n){return arguments.length?(d=hn(g,en=n*n),an()):v(en)},rn.fitExtent=function(n,t){return ln(rn,n,t)},rn.fitSize=function(n,t){return function(n,t,e){return ln(n,[[0,0],t],e)}(rn,n,t)},rn.fitWidth=function(n,t){return function(n,t,e){return cn(n,(function(e){var i=+t,r=i/(e[1][0]-e[0][0]),o=(i-r*(e[1][0]+e[0][0]))/2,u=-r*e[0][1];n.scale(150*r).translate([o,u])}),e)}(rn,n,t)},rn.fitHeight=function(n,t){return function(n,t,e){return cn(n,(function(e){var i=+t,r=i/(e[1][1]-e[0][1]),o=-r*e[0][0],u=(i-r*(e[1][1]+e[0][1]))/2;n.scale(150*r).translate([o,u])}),e)}(rn,n,t)},function(){return e=t.apply(this,arguments),rn.invert=e.invert&&on,un()}}((function(){return t}))()}function yn(n,t){return[h(t)*p(n),p(t)]}yn.invert=(pn=g,function(n,t){var e=v(n*n+t*t),i=pn(e),r=p(i),o=h(i);return[f(n*r,e*o),g(e&&t*r/e)]});var mn,Sn,En,wn,Mn=new _,_n=new _,xn={point:y,lineStart:y,lineEnd:y,polygonStart:function(){xn.lineStart=Cn,xn.lineEnd=Ln},polygonEnd:function(){xn.lineStart=xn.lineEnd=xn.point=y,Mn.add(l(_n)),_n=new _},result:function(){var n=Mn/2;return Mn=new _,n}};function Cn(){xn.point=Nn}function Nn(n,t){xn.point=bn,mn=En=n,Sn=wn=t}function bn(n,t){_n.add(wn*n-En*t),En=n,wn=t}function Ln(){bn(mn,Sn)}var $n,Pn,jn,kn,Tn=xn,Rn=0,Dn=0,zn=0,An=0,Fn=0,Gn=0,On=0,Un=0,Yn=0,qn={point:Xn,lineStart:Zn,lineEnd:Wn,polygonStart:function(){qn.lineStart=Bn,qn.lineEnd=In},polygonEnd:function(){qn.point=Xn,qn.lineStart=Zn,qn.lineEnd=Wn},result:function(){var n=Yn?[On/Yn,Un/Yn]:Gn?[An/Gn,Fn/Gn]:zn?[Rn/zn,Dn/zn]:[NaN,NaN];return Rn=Dn=zn=An=Fn=Gn=On=Un=Yn=0,n}};function Xn(n,t){Rn+=n,Dn+=t,++zn}function Zn(){qn.point=Hn}function Hn(n,t){qn.point=Vn,Xn(jn=n,kn=t)}function Vn(n,t){var e=n-jn,i=t-kn,r=v(e*e+i*i);An+=r*(jn+n)/2,Fn+=r*(kn+t)/2,Gn+=r,Xn(jn=n,kn=t)}function Wn(){qn.point=Xn}function Bn(){qn.point=Kn}function In(){Jn($n,Pn)}function Kn(n,t){qn.point=Jn,Xn($n=jn=n,Pn=kn=t)}function Jn(n,t){var e=n-jn,i=t-kn,r=v(e*e+i*i);An+=r*(jn+n)/2,Fn+=r*(kn+t)/2,Gn+=r,On+=(r=kn*n-jn*t)*(jn+n),Un+=r*(kn+t),Yn+=3*r,Xn(jn=n,kn=t)}var Qn=qn;function nt(n){this._context=n}nt.prototype={_radius:4.5,pointRadius:function(n){return this._radius=n,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(n,t){switch(this._point){case 0:this._context.moveTo(n,t),this._point=1;break;case 1:this._context.lineTo(n,t);break;default:this._context.moveTo(n+this._radius,t),this._context.arc(n,t,this._radius,0,u)}},result:y};var tt,et,it,rt,ot,ut=new _,at={point:y,lineStart:function(){at.point=ct},lineEnd:function(){tt&&lt(et,it),at.point=y},polygonStart:function(){tt=!0},polygonEnd:function(){tt=null},result:function(){var n=+ut;return ut=new _,n}};function ct(n,t){at.point=lt,et=rt=n,it=ot=t}function lt(n,t){rt-=n,ot-=t,ut.add(v(rt*rt+ot*ot)),rt=n,ot=t}var st=at;let ft,ht,pt,dt;class vt{constructor(n){this._append=null==n?gt:function(n){const t=Math.floor(n);if(!(t>=0))throw new RangeError(`invalid digits: ${n}`);if(t>15)return gt;if(t!==ft){const n=10**t;ft=t,ht=function(t){let e=1;this._+=t[0];for(const i=t.length;e<i;++e)this._+=Math.round(arguments[e]*n)/n+t[e]}}return ht}(n),this._radius=4.5,this._=""}pointRadius(n){return this._radius=+n,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){0===this._line&&(this._+="Z"),this._point=NaN}point(n,t){switch(this._point){case 0:this._append`M${n},${t}`,this._point=1;break;case 1:this._append`L${n},${t}`;break;default:if(this._append`M${n},${t}`,this._radius!==pt||this._append!==ht){const n=this._radius,t=this._;this._="",this._append`m0,${n}a${n},${n} 0 1,1 0,${-2*n}a${n},${n} 0 1,1 0,${2*n}z`,pt=n,ht=this._append,dt=this._,this._=t}this._+=dt}}result(){const n=this._;return this._="",n.length?n:null}}function gt(n){let t=1;this._+=n[0];for(const e=n.length;t<e;++t)this._+=arguments[t]+n[t]}var yt,mt,St,Et,wt={sphere:y,point:y,lineStart:function(){wt.point=_t,wt.lineEnd=Mt},lineEnd:y,polygonStart:y,polygonEnd:y};function Mt(){wt.point=wt.lineEnd=y}function _t(n,t){mt=n*=c,St=p(t*=c),Et=h(t),wt.point=xt}function xt(n,t){n*=c;var e=p(t*=c),i=h(t),r=l(n-mt),o=h(r),u=i*p(r),a=Et*e-St*i*o,s=St*e+Et*i*o;yt.add(f(v(u*u+a*a),s)),mt=n,St=e,Et=i}var Ct=[null,null],Nt={type:"LineString",coordinates:Ct};function bt(n,t){return Ct[0]=n,Ct[1]=t,function(n){return yt=new _,nn(n,wt),+yt}(Nt)}var Lt={Feature:function(n,t){return Pt(n.geometry,t)},FeatureCollection:function(n,t){for(var e=n.features,i=-1,r=e.length;++i<r;)if(Pt(e[i].geometry,t))return!0;return!1}},$t={Sphere:function(){return!0},Point:function(n,t){return jt(n.coordinates,t)},MultiPoint:function(n,t){for(var e=n.coordinates,i=-1,r=e.length;++i<r;)if(jt(e[i],t))return!0;return!1},LineString:function(n,t){return kt(n.coordinates,t)},MultiLineString:function(n,t){for(var e=n.coordinates,i=-1,r=e.length;++i<r;)if(kt(e[i],t))return!0;return!1},Polygon:function(n,t){return Tt(n.coordinates,t)},MultiPolygon:function(n,t){for(var e=n.coordinates,i=-1,r=e.length;++i<r;)if(Tt(e[i],t))return!0;return!1},GeometryCollection:function(n,t){for(var e=n.geometries,i=-1,r=e.length;++i<r;)if(Pt(e[i],t))return!0;return!1}};function Pt(n,t){return!(!n||!$t.hasOwnProperty(n.type))&&$t[n.type](n,t)}function jt(n,t){return 0===bt(n,t)}function kt(n,e){for(var i,r,o,u=0,a=n.length;u<a;u++){if(0===(r=bt(n[u],e)))return!0;if(u>0&&(o=bt(n[u],n[u-1]))>0&&i<=o&&r<=o&&(i+r-o)*(1-Math.pow((i-r)/o,2))<t*o)return!0;i=r}return!1}function Tt(n,t){return!!k(n.map(Rt),Dt(t))}function Rt(n){return(n=n.map(Dt)).pop(),n}function Dt(n){return[n[0]*c,n[1]*c]}function zt(n,t){return(n&&Lt.hasOwnProperty(n.type)?Lt[n.type]:Pt)(n,t)}function At(n,t){if(n=function(n){let t;for(;t=n.sourceEvent;)n=t;return n}(n),void 0===t&&(t=n.currentTarget),t){var e=t.ownerSVGElement||t;if(e.createSVGPoint){var i=e.createSVGPoint();return i.x=n.clientX,i.y=n.clientY,[(i=i.matrixTransform(t.getScreenCTM().inverse())).x,i.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[n.clientX-r.left-t.clientLeft,n.clientY-r.top-t.clientTop]}}return[n.pageX,n.pageY]}var Ft={hide(n){n.style.visibility="hidden"},show(n,t){const{name:e,countryCode:i,currencyCode:r,currencyName:o="",currencySymbol:u=""}=t,a=document.createElement("p"),c=document.createElement("span"),l=document.createElement("p"),s=document.createElement("p"),f=(null==i?void 0:i.toLowerCase())||"xx";c.className=`fi fi-${f}`,a.className="tooltip-title",a.append(c,e),l.innerText=`Currency code: ${r}`,l.className="tooltip-info",s.innerText=`${o} ${u}`,s.className="tooltip-info",n.replaceChildren(a,l,s),n.style.visibility="visible"}};const Gt=()=>{};var Ot=class{constructor(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Gt;this.countries={},this.length=0,this.max=n,this.onChange=t}get list(){return Object.values(this.countries)}get countryCodes(){return Object.keys(this.countries)}isSelected(n){return!!this.countries[n]}add(n){const{countryCode:t}=n;return this.countries[t]||this.isFull()||(this.countries[t]=n,this.length+=1,this.onChange(this.list)),this.length}remove(n){return this.countries[n]?(delete this.countries[n],this.length-=1,this.onChange(this.list),this.length):this.length}isFull(){return this.length>=this.max}};const Ut=[0,0],Yt="#e0e1dd",qt="#9e2a2b";var Xt=function(n){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,e=0;return function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];e=Date.now(),window.setTimeout((()=>function(){Date.now()-e>=t&&n(...arguments)}(...r)),t)}}((async n=>{const t=n.target,e=t.dataset.currencyCode,i=t.value,r=t.parentNode.siblings();if(r.length<1||Number(i)<=0||!i)return;const o=r.map((n=>n.dataset.currencyCode)).map((n=>({from:e,to:n,amount:i}))),u=await(async n=>Promise.all(n.map((n=>{let{from:t,to:e,amount:i}=n;return async function(n,t){const e=`https://v6.exchangerate-api.com/v6/e3d46af59ee935ce1e59357a/pair/${n}/${t}/${arguments.length>2&&void 0!==arguments[2]?arguments[2]:1}`,i=await fetch(e);return(await i.json()).conversion_result}(t,e,i)}))))(o);r.forEach(((n,t)=>{n.lastChild.value=u[t]}))}),600);const Zt=document.querySelector("#inputs-container"),Ht=(n,t)=>{const e=document.createElement("div"),i=document.createElement("input"),r=document.createElement("label"),o=document.createElement("span");let u;if(i.value=0,i.type="number",i.id=`currency-input-${n.currencyCode}-${t}`,i.className="currency-input",i.dataset.currencyCode=n.currencyCode,"EUR"===n.currencyCode)u="eu";else if("USD"===n.currencyCode)u="us";else{var a;u=(null===(a=n.countryCode)||void 0===a?void 0:a.toLowerCase())||"xx"}return r.setAttribute("for",`currency-input-${n.currencyCode}-${t}`),o.className=`fi fi-${u}`,r.append(n.currencyCode,o),e.className="currency-input-wrapper",e.dataset.currencyCode=n.currencyCode,e.dataset.currencyName=n.currencyName||"N/A",e.dataset.currencySymbol=n.currencySymbol||"",e.append(r,i),e};new class{constructor(t,e,i){this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.width=this.canvas.offsetWidth,this.height=this.canvas.offsetHeight,this.tooltip=e,this.scale=250,this.rotation=Ut,this.geojson={},this.state={clickedLocation:null,hoveredLocation:null,selectedCountries:new Ot(5,i)},this.dragStartedTime=null,this.handleMouseDown=this.handleMouseDown.bind(this),this.handleMouseMove=this.handleMouseMove.bind(this),this.handleMouseUp=this.handleMouseUp.bind(this),this.handleZoom=this.handleZoom.bind(this),this.projection=gn(yn).scale(249.5).clipAngle(90+n),this.geoGenerator=function(n,t){let e,i,r=3,o=4.5;function u(n){return n&&("function"==typeof o&&i.pointRadius(+o.apply(this,arguments)),nn(n,e(i))),i.result()}return u.area=function(n){return nn(n,e(Tn)),Tn.result()},u.measure=function(n){return nn(n,e(st)),st.result()},u.bounds=function(n){return nn(n,e(an)),an.result()},u.centroid=function(n){return nn(n,e(Qn)),Qn.result()},u.projection=function(t){return arguments.length?(e=null==t?(n=null,Y):(n=t).stream,u):n},u.context=function(n){return arguments.length?(i=null==n?(t=null,new vt(r)):new nt(t=n),"function"!=typeof o&&i.pointRadius(o),u):t},u.pointRadius=function(n){return arguments.length?(o="function"==typeof n?n:(i.pointRadius(+n),+n),u):o},u.digits=function(n){if(!arguments.length)return r;if(null==n)r=null;else{const t=Math.floor(n);if(!(t>=0))throw new RangeError(`invalid digits: ${n}`);r=t}return null===t&&(i=new vt(r)),u},u.projection(n).digits(r).context(t)}().projection(this.projection).context(this.ctx),this.canvas.addEventListener("mousedown",this.handleMouseDown),this.canvas.addEventListener("mouseup",this.handleMouseUp),this.canvas.addEventListener("mousemove",this.handleMouseMove),this.canvas.addEventListener("wheel",this.handleZoom)}get clickedLocation(){return this.state.clickedLocation}set clickedLocation(n){this.state.clickedLocation=n}get hoveredLocation(){return this.state.hoveredLocation}set hoveredLocation(n){this.state.hoveredLocation=n}update(){const{projection:n,ctx:t,width:e,height:i,geojson:r,scale:o,rotation:u,geoGenerator:a,clickedLocation:c,hoveredLocation:l,tooltip:s,state:f}=this;t.clearRect(0,0,e,i),Ft.hide(s),n.fitSize([e,i],r),n.scale(o),n.rotate(u),t.beginPath(),t.strokeStyle="#ccc",t.fillStyle="#415a77",a({type:"Sphere"}),t.stroke(),t.fill();for(let n=0;n<r.features.length;n+=1){const e=r.features[n];t.beginPath(),t.lineWidth=.45,t.strokeStyle="#0d1b2a",t.fillStyle=Yt,l&&zt(e,l)&&(t.fillStyle="#778da9",Ft.show(s,e.properties)),f.selectedCountries.isSelected(e.properties.countryCode)&&(t.fillStyle=qt),c&&zt(e,c)&&(f.selectedCountries.isSelected(e.properties.countryCode)?(f.selectedCountries.remove(e.properties.countryCode),t.fillStyle=Yt):(f.selectedCountries.add(e.properties),t.fillStyle=qt),this.clickedLocation=null),a(e),t.stroke(),t.fill()}}handleMouseDown(){this.dragStartedTime=Date.now()}handleMouseMove(n){const{dragStartedTime:t,scale:e,rotation:i}=this;if(t){const t=e>800?.1:.3,r=n.movementX*t,o=n.movementY*t,[u,a]=i;this.rotation=[(u+r)%360,(a-o)%360]}else{const t=At(n,this.canvas);this.hoveredLocation=this.projection.invert(t)}this.update()}handleMouseUp(n){const{dragStartedTime:t,projection:e}=this;if(!t||Date.now()-t<150){const t=At(n,this.canvas);this.clickedLocation=e.invert(t),this.update()}this.dragStartedTime=null}handleZoom(n){n.preventDefault(),n.ctrlKey&&(this.scale-=.5*n.deltaY,this.scale>1800&&(this.scale=1800),this.scale<130&&(this.scale=130),this.update())}async initialize(){const n=await fetch("https://gist.githubusercontent.com/artemplv/be8ebf292a4433944f3948b06732a6cc/raw/95e446a098596eb51cc9734e8b9e12ec8e1781d9/110m_countries.json");this.geojson=await n.json(),this.update()}}(document.querySelector("#map"),document.querySelector("#map-tooltip"),(n=>{const t=document.querySelector(".placeholder-container");n.length>0?t.classList.add("hidden"):t.classList.remove("hidden");const e=document.createElement("form");e.addEventListener("input",Xt);for(let t=0;t<n.length;t+=1){const i=Ht(n[t],t);e.appendChild(i)}Zt.replaceChildren(e)})).initialize()}()}();
//# sourceMappingURL=main.js.map