!function(){"use strict";!function(){var n=1e-6,t=1e-12,e=Math.PI,i=e/2,r=e/4,o=2*e,u=180/e,l=e/180,a=Math.abs,c=Math.atan,s=Math.atan2,f=Math.cos,h=(Math.ceil,Math.exp,Math.floor,Math.hypot,Math.log,Math.pow,Math.sin),p=Math.sign||function(n){return n>0?1:n<0?-1:0},d=Math.sqrt;function v(n){return n>1?i:n<-1?-i:Math.asin(n)}function g(){}function S(){var n,t=[];return{point:function(t,e,i){n.push([t,e,i])},lineStart:function(){t.push(n=[])},lineEnd:g,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var e=t;return t=[],n=null,e}}}function y(t,e){return a(t[0]-e[0])<n&&a(t[1]-e[1])<n}function m(n,t,e,i){this.x=n,this.z=t,this.o=e,this.e=i,this.v=!1,this.n=this.p=null}function E(t,e,i,r,o){var u,l,a=[],c=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,i,r=t[0],l=t[e];if(y(r,l)){if(!r[2]&&!l[2]){for(o.lineStart(),u=0;u<e;++u)o.point((r=t[u])[0],r[1]);return void o.lineEnd()}l[0]+=2*n}a.push(i=new m(r,t,null,!0)),c.push(i.o=new m(r,null,i,!1)),a.push(i=new m(l,t,null,!1)),c.push(i.o=new m(l,null,i,!0))}})),a.length){for(c.sort(e),M(a),M(c),u=0,l=c.length;u<l;++u)c[u].e=i=!i;for(var s,f,h=a[0];;){for(var p=h,d=!0;p.v;)if((p=p.n)===h)return;s=p.z,o.lineStart();do{if(p.v=p.o.v=!0,p.e){if(d)for(u=0,l=s.length;u<l;++u)o.point((f=s[u])[0],f[1]);else r(p.x,p.n.x,1,o);p=p.n}else{if(d)for(s=p.p.z,u=s.length-1;u>=0;--u)o.point((f=s[u])[0],f[1]);else r(p.x,p.p.x,-1,o);p=p.p}s=(p=p.o).z,d=!d}while(!p.v);o.lineEnd()}}}function M(n){if(t=n.length){for(var t,e,i=0,r=n[0];++i<t;)r.n=e=n[i],e.p=r,r=e;r.n=e=n[0],e.p=r}}Math.tan;class _{constructor(){this._partials=new Float64Array(32),this._n=0}add(n){const t=this._partials;let e=0;for(let i=0;i<this._n&&i<32;i++){const r=t[i],o=n+r,u=Math.abs(n)<Math.abs(r)?n-(o-r):r-(o-n);u&&(t[e++]=u),n=o}return t[e]=n,this._n=e+1,this}valueOf(){const n=this._partials;let t,e,i,r=this._n,o=0;if(r>0){for(o=n[--r];r>0&&(t=o,e=n[--r],o=t+e,i=e-(o-t),!i););r>0&&(i<0&&n[r-1]<0||i>0&&n[r-1]>0)&&(e=2*i,t=o+e,e==t-o&&(o=t))}return o}}function w(n){return[s(n[1],n[0]),v(n[2])]}function x(n){var t=n[0],e=n[1],i=f(e);return[i*f(t),i*h(t),h(e)]}function C(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function b(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function L(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function N(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function P(n){var t=d(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}function $(n){return a(n[0])<=e?n[0]:p(n[0])*((a(n[0])+e)%o-e)}function k(u,l){var a=$(l),c=l[1],p=h(c),d=[h(a),-f(a),0],g=0,S=0,y=new _;1===p?c=i+n:-1===p&&(c=-i-n);for(var m=0,E=u.length;m<E;++m)if(w=(M=u[m]).length)for(var M,w,C=M[w-1],L=$(C),N=C[1]/2+r,k=h(N),T=f(N),j=0;j<w;++j,L=z,k=F,T=G,C=R){var R=M[j],z=$(R),D=R[1]/2+r,F=h(D),G=f(D),Y=z-L,O=Y>=0?1:-1,X=O*Y,Z=X>e,q=k*F;if(y.add(s(q*O*h(X),T*G+q*f(X))),g+=Z?Y+O*o:Y,Z^L>=a^z>=a){var A=b(x(C),x(R));P(A);var U=b(d,A);P(U);var V=(Z^Y>=0?-1:1)*v(U[2]);(c>V||c===V&&(A[0]||A[1]))&&(S+=Z^Y>=0?1:-1)}}return(g<-n||g<n&&y<-t)^1&S}function T(n){return Array.from(function*(n){for(const t of n)yield*t}(n))}function j(n,t,e,i){return function(r){var o,u,l,a=t(r),c=S(),s=t(c),f=!1,h={point:p,lineStart:v,lineEnd:g,polygonStart:function(){h.point=y,h.lineStart=m,h.lineEnd=M,u=[],o=[]},polygonEnd:function(){h.point=p,h.lineStart=v,h.lineEnd=g,u=T(u);var n=k(o,i);u.length?(f||(r.polygonStart(),f=!0),E(u,z,n,e,r)):n&&(f||(r.polygonStart(),f=!0),r.lineStart(),e(null,null,1,r),r.lineEnd()),f&&(r.polygonEnd(),f=!1),u=o=null},sphere:function(){r.polygonStart(),r.lineStart(),e(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function p(t,e){n(t,e)&&r.point(t,e)}function d(n,t){a.point(n,t)}function v(){h.point=d,a.lineStart()}function g(){h.point=p,a.lineEnd()}function y(n,t){l.push([n,t]),s.point(n,t)}function m(){s.lineStart(),l=[]}function M(){y(l[0][0],l[0][1]),s.lineEnd();var n,t,e,i,a=s.clean(),h=c.result(),p=h.length;if(l.pop(),o.push(l),l=null,p)if(1&a){if((t=(e=h[0]).length-1)>0){for(f||(r.polygonStart(),f=!0),r.lineStart(),n=0;n<t;++n)r.point((i=e[n])[0],i[1]);r.lineEnd()}}else p>1&&2&a&&h.push(h.pop().concat(h.shift())),u.push(h.filter(R))}return h}}function R(n){return n.length>1}function z(t,e){return((t=t.x)[0]<0?t[1]-i-n:i-t[1])-((e=e.x)[0]<0?e[1]-i-n:i-e[1])}var D=j((function(){return!0}),(function(t){var r,o=NaN,u=NaN,l=NaN;return{lineStart:function(){t.lineStart(),r=1},point:function(s,p){var d=s>0?e:-e,v=a(s-o);a(v-e)<n?(t.point(o,u=(u+p)/2>0?i:-i),t.point(l,u),t.lineEnd(),t.lineStart(),t.point(d,u),t.point(s,u),r=0):l!==d&&v>=e&&(a(o-l)<n&&(o-=l*n),a(s-d)<n&&(s-=d*n),u=function(t,e,i,r){var o,u,l=h(t-i);return a(l)>n?c((h(e)*(u=f(r))*h(i)-h(r)*(o=f(e))*h(t))/(o*u*l)):(e+r)/2}(o,u,s,p),t.point(l,u),t.lineEnd(),t.lineStart(),t.point(d,u),r=0),t.point(o=s,u=p),l=d},lineEnd:function(){t.lineEnd(),o=u=NaN},clean:function(){return 2-r}}}),(function(t,r,o,u){var l;if(null==t)l=o*i,u.point(-e,l),u.point(0,l),u.point(e,l),u.point(e,0),u.point(e,-l),u.point(0,-l),u.point(-e,-l),u.point(-e,0),u.point(-e,l);else if(a(t[0]-r[0])>n){var c=t[0]<r[0]?e:-e;l=o*c/2,u.point(-c,l),u.point(0,l),u.point(c,l)}else u.point(r[0],r[1])}),[-e,-i]);function F(t,i){(i=x(i))[0]-=t,P(i);var r,u=(r=-i[1])>1?0:r<-1?e:Math.acos(r);return((-i[2]<0?-u:u)+o-n)%o}var G=1e9,Y=-G;function O(n,t){function e(e,i){return e=n(e,i),t(e[0],e[1])}return n.invert&&t.invert&&(e.invert=function(e,i){return(e=t.invert(e,i))&&n.invert(e[0],e[1])}),e}var X=n=>n;function Z(n,t){return a(n)>e&&(n-=Math.round(n/o)*o),[n,t]}function q(n){return function(t,i){return a(t+=n)>e&&(t-=Math.round(t/o)*o),[t,i]}}function A(n){var t=q(n);return t.invert=q(-n),t}function U(n,t){var e=f(n),i=h(n),r=f(t),o=h(t);function u(n,t){var u=f(t),l=f(n)*u,a=h(n)*u,c=h(t),p=c*e+l*i;return[s(a*r-p*o,l*e-c*i),v(p*r+a*o)]}return u.invert=function(n,t){var u=f(t),l=f(n)*u,a=h(n)*u,c=h(t),p=c*r-a*o;return[s(a*r+c*o,l*e+p*i),v(p*e-l*i)]},u}function V(n){return function(t){var e=new W;for(var i in n)e[i]=n[i];return e.stream=t,e}}function W(){}function B(n,t){n&&I.hasOwnProperty(n.type)&&I[n.type](n,t)}Z.invert=Z,W.prototype={constructor:W,point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var H={Feature:function(n,t){B(n.geometry,t)},FeatureCollection:function(n,t){for(var e=n.features,i=-1,r=e.length;++i<r;)B(e[i].geometry,t)}},I={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var e=n.coordinates,i=-1,r=e.length;++i<r;)n=e[i],t.point(n[0],n[1],n[2])},LineString:function(n,t){K(n.coordinates,t,0)},MultiLineString:function(n,t){for(var e=n.coordinates,i=-1,r=e.length;++i<r;)K(e[i],t,0)},Polygon:function(n,t){J(n.coordinates,t)},MultiPolygon:function(n,t){for(var e=n.coordinates,i=-1,r=e.length;++i<r;)J(e[i],t)},GeometryCollection:function(n,t){for(var e=n.geometries,i=-1,r=e.length;++i<r;)B(e[i],t)}};function K(n,t,e){var i,r=-1,o=n.length-e;for(t.lineStart();++r<o;)i=n[r],t.point(i[0],i[1],i[2]);t.lineEnd()}function J(n,t){var e=-1,i=n.length;for(t.polygonStart();++e<i;)K(n[e],t,1);t.polygonEnd()}function Q(n,t){n&&H.hasOwnProperty(n.type)?H[n.type](n,t):B(n,t)}var nn=1/0,tn=nn,en=-nn,rn=en,on={point:function(n,t){n<nn&&(nn=n),n>en&&(en=n),t<tn&&(tn=t),t>rn&&(rn=t)},lineStart:g,lineEnd:g,polygonStart:g,polygonEnd:g,result:function(){var n=[[nn,tn],[en,rn]];return en=rn=-(tn=nn=1/0),n}},un=on;function ln(n,t,e){var i=n.clipExtent&&n.clipExtent();return n.scale(150).translate([0,0]),null!=i&&n.clipExtent(null),Q(e,n.stream(un)),t(un.result()),null!=i&&n.clipExtent(i),n}function an(n,t,e){return ln(n,(function(e){var i=t[1][0]-t[0][0],r=t[1][1]-t[0][1],o=Math.min(i/(e[1][0]-e[0][0]),r/(e[1][1]-e[0][1])),u=+t[0][0]+(i-o*(e[1][0]+e[0][0]))/2,l=+t[0][1]+(r-o*(e[1][1]+e[0][1]))/2;n.scale(150*o).translate([u,l])}),e)}var cn=16,sn=f(30*l);function fn(t,e){return+e?function(t,e){function i(r,o,u,l,c,f,h,p,g,S,y,m,E,M){var _=h-r,w=p-o,x=_*_+w*w;if(x>4*e&&E--){var C=l+S,b=c+y,L=f+m,N=d(C*C+b*b+L*L),P=v(L/=N),$=a(a(L)-1)<n||a(u-g)<n?(u+g)/2:s(b,C),k=t($,P),T=k[0],j=k[1],R=T-r,z=j-o,D=w*R-_*z;(D*D/x>e||a((_*R+w*z)/x-.5)>.3||l*S+c*y+f*m<sn)&&(i(r,o,u,l,c,f,T,j,$,C/=N,b/=N,L,E,M),M.point(T,j),i(T,j,$,C,b,L,h,p,g,S,y,m,E,M))}}return function(n){var e,r,o,u,l,a,c,s,f,h,p,d,v={point:g,lineStart:S,lineEnd:m,polygonStart:function(){n.polygonStart(),v.lineStart=E},polygonEnd:function(){n.polygonEnd(),v.lineStart=S}};function g(e,i){e=t(e,i),n.point(e[0],e[1])}function S(){s=NaN,v.point=y,n.lineStart()}function y(e,r){var o=x([e,r]),u=t(e,r);i(s,f,c,h,p,d,s=u[0],f=u[1],c=e,h=o[0],p=o[1],d=o[2],cn,n),n.point(s,f)}function m(){v.point=g,n.lineEnd()}function E(){S(),v.point=M,v.lineEnd=_}function M(n,t){y(e=n,t),r=s,o=f,u=h,l=p,a=d,v.point=y}function _(){i(s,f,c,h,p,d,r,o,e,u,l,a,cn,n),v.lineEnd=m,m()}return v}}(t,e):function(n){return V({point:function(t,e){t=n(t,e),this.stream.point(t[0],t[1])}})}(t)}var hn,pn=V({point:function(n,t){this.stream.point(n*l,t*l)}});function dn(n,t,e,i,r,o){if(!o)return function(n,t,e,i,r){function o(o,u){return[t+n*(o*=i),e-n*(u*=r)]}return o.invert=function(o,u){return[(o-t)/n*i,(e-u)/n*r]},o}(n,t,e,i,r);var u=f(o),l=h(o),a=u*n,c=l*n,s=u/n,p=l/n,d=(l*e-u*t)/n,v=(l*t+u*e)/n;function g(n,o){return[a*(n*=i)-c*(o*=r)+t,e-c*n-a*o]}return g.invert=function(n,t){return[i*(s*n-p*t+d),r*(v-p*n-s*t)]},g}function vn(t){return function(t){var i,r,c,s,p,v,g,m,M,_,P=150,$=480,k=250,R=0,z=0,q=0,W=0,B=0,H=0,I=1,K=1,J=null,Q=D,nn=null,tn=X,en=.5;function rn(n){return m(n[0]*l,n[1]*l)}function on(n){return(n=m.invert(n[0],n[1]))&&[n[0]*u,n[1]*u]}function un(){var n=dn(P,0,0,I,K,H).apply(null,i(R,z)),t=dn(P,$-n[0],k-n[1],I,K,H);return r=function(n,t,e){return(n%=o)?t||e?O(A(n),U(t,e)):A(n):t||e?U(t,e):Z}(q,W,B),g=O(i,t),m=O(r,g),v=fn(g,en),cn()}function cn(){return M=_=null,rn}return rn.stream=function(n){return M&&_===n?M:M=pn(function(n){return V({point:function(t,e){var i=n(t,e);return this.stream.point(i[0],i[1])}})}(r)(Q(v(tn(_=n)))))},rn.preclip=function(n){return arguments.length?(Q=n,J=void 0,cn()):Q},rn.postclip=function(n){return arguments.length?(tn=n,nn=c=s=p=null,cn()):tn},rn.clipAngle=function(t){return arguments.length?(Q=+t?function(t){var i=f(t),r=6*l,u=i>0,c=a(i)>n;function s(n,t){return f(n)*f(t)>i}function p(t,r,o){var u=[1,0,0],l=b(x(t),x(r)),c=C(l,l),s=l[0],f=c-s*s;if(!f)return!o&&t;var h=i*c/f,p=-i*s/f,v=b(u,l),g=N(u,h);L(g,N(l,p));var S=v,y=C(g,S),m=C(S,S),E=y*y-m*(C(g,g)-1);if(!(E<0)){var M=d(E),_=N(S,(-y-M)/m);if(L(_,g),_=w(_),!o)return _;var P,$=t[0],k=r[0],T=t[1],j=r[1];k<$&&(P=$,$=k,k=P);var R=k-$,z=a(R-e)<n;if(!z&&j<T&&(P=T,T=j,j=P),z||R<n?z?T+j>0^_[1]<(a(_[0]-$)<n?T:j):T<=_[1]&&_[1]<=j:R>e^($<=_[0]&&_[0]<=k)){var D=N(S,(-y+M)/m);return L(D,g),[_,w(D)]}}}function v(n,i){var r=u?t:e-t,o=0;return n<-r?o|=1:n>r&&(o|=2),i<-r?o|=4:i>r&&(o|=8),o}return j(s,(function(n){var t,i,r,o,l;return{lineStart:function(){o=r=!1,l=1},point:function(a,f){var h,d=[a,f],g=s(a,f),S=u?g?0:v(a,f):g?v(a+(a<0?e:-e),f):0;if(!t&&(o=r=g)&&n.lineStart(),g!==r&&(!(h=p(t,d))||y(t,h)||y(d,h))&&(d[2]=1),g!==r)l=0,g?(n.lineStart(),h=p(d,t),n.point(h[0],h[1])):(h=p(t,d),n.point(h[0],h[1],2),n.lineEnd()),t=h;else if(c&&t&&u^g){var m;S&i||!(m=p(d,t,!0))||(l=0,u?(n.lineStart(),n.point(m[0][0],m[0][1]),n.point(m[1][0],m[1][1]),n.lineEnd()):(n.point(m[1][0],m[1][1]),n.lineEnd(),n.lineStart(),n.point(m[0][0],m[0][1],3)))}!g||t&&y(t,d)||n.point(d[0],d[1]),t=d,r=g,i=S},lineEnd:function(){r&&n.lineEnd(),t=null},clean:function(){return l|(o&&r)<<1}}}),(function(n,e,i,u){!function(n,t,e,i,r,u){if(e){var l=f(t),a=h(t),c=i*e;null==r?(r=t+i*o,u=t-c/2):(r=F(l,r),u=F(l,u),(i>0?r<u:r>u)&&(r+=i*o));for(var s,p=r;i>0?p>u:p<u;p-=c)s=w([l,-a*f(p),-a*h(p)]),n.point(s[0],s[1])}}(u,t,r,i,n,e)}),u?[0,-t]:[-e,t-e])}(J=t*l):(J=null,D),cn()):J*u},rn.clipExtent=function(t){return arguments.length?(tn=null==t?(nn=c=s=p=null,X):function(t,e,i,r){function o(n,o){return t<=n&&n<=i&&e<=o&&o<=r}function u(n,o,u,a){var c=0,f=0;if(null==n||(c=l(n,u))!==(f=l(o,u))||s(n,o)<0^u>0)do{a.point(0===c||3===c?t:i,c>1?r:e)}while((c=(c+u+4)%4)!==f);else a.point(o[0],o[1])}function l(r,o){return a(r[0]-t)<n?o>0?0:3:a(r[0]-i)<n?o>0?2:1:a(r[1]-e)<n?o>0?1:0:o>0?3:2}function c(n,t){return s(n.x,t.x)}function s(n,t){var e=l(n,1),i=l(t,1);return e!==i?e-i:0===e?t[1]-n[1]:1===e?n[0]-t[0]:2===e?n[1]-t[1]:t[0]-n[0]}return function(n){var l,a,s,f,h,p,d,v,g,y,m,M=n,_=S(),w={point:x,lineStart:function(){w.point=C,a&&a.push(s=[]),y=!0,g=!1,d=v=NaN},lineEnd:function(){l&&(C(f,h),p&&g&&_.rejoin(),l.push(_.result())),w.point=x,g&&M.lineEnd()},polygonStart:function(){M=_,l=[],a=[],m=!0},polygonEnd:function(){var e=function(){for(var n=0,e=0,i=a.length;e<i;++e)for(var o,u,l=a[e],c=1,s=l.length,f=l[0],h=f[0],p=f[1];c<s;++c)o=h,u=p,h=(f=l[c])[0],p=f[1],u<=r?p>r&&(h-o)*(r-u)>(p-u)*(t-o)&&++n:p<=r&&(h-o)*(r-u)<(p-u)*(t-o)&&--n;return n}(),i=m&&e,o=(l=T(l)).length;(i||o)&&(n.polygonStart(),i&&(n.lineStart(),u(null,null,1,n),n.lineEnd()),o&&E(l,c,e,u,n),n.polygonEnd()),M=n,l=a=s=null}};function x(n,t){o(n,t)&&M.point(n,t)}function C(n,u){var l=o(n,u);if(a&&s.push([n,u]),y)f=n,h=u,p=l,y=!1,l&&(M.lineStart(),M.point(n,u));else if(l&&g)M.point(n,u);else{var c=[d=Math.max(Y,Math.min(G,d)),v=Math.max(Y,Math.min(G,v))],S=[n=Math.max(Y,Math.min(G,n)),u=Math.max(Y,Math.min(G,u))];!function(n,t,e,i,r,o){var u,l=n[0],a=n[1],c=0,s=1,f=t[0]-l,h=t[1]-a;if(u=e-l,f||!(u>0)){if(u/=f,f<0){if(u<c)return;u<s&&(s=u)}else if(f>0){if(u>s)return;u>c&&(c=u)}if(u=r-l,f||!(u<0)){if(u/=f,f<0){if(u>s)return;u>c&&(c=u)}else if(f>0){if(u<c)return;u<s&&(s=u)}if(u=i-a,h||!(u>0)){if(u/=h,h<0){if(u<c)return;u<s&&(s=u)}else if(h>0){if(u>s)return;u>c&&(c=u)}if(u=o-a,h||!(u<0)){if(u/=h,h<0){if(u>s)return;u>c&&(c=u)}else if(h>0){if(u<c)return;u<s&&(s=u)}return c>0&&(n[0]=l+c*f,n[1]=a+c*h),s<1&&(t[0]=l+s*f,t[1]=a+s*h),!0}}}}}(c,S,t,e,i,r)?l&&(M.lineStart(),M.point(n,u),m=!1):(g||(M.lineStart(),M.point(c[0],c[1])),M.point(S[0],S[1]),l||M.lineEnd(),m=!1)}d=n,v=u,g=l}return w}}(nn=+t[0][0],c=+t[0][1],s=+t[1][0],p=+t[1][1]),cn()):null==nn?null:[[nn,c],[s,p]]},rn.scale=function(n){return arguments.length?(P=+n,un()):P},rn.translate=function(n){return arguments.length?($=+n[0],k=+n[1],un()):[$,k]},rn.center=function(n){return arguments.length?(R=n[0]%360*l,z=n[1]%360*l,un()):[R*u,z*u]},rn.rotate=function(n){return arguments.length?(q=n[0]%360*l,W=n[1]%360*l,B=n.length>2?n[2]%360*l:0,un()):[q*u,W*u,B*u]},rn.angle=function(n){return arguments.length?(H=n%360*l,un()):H*u},rn.reflectX=function(n){return arguments.length?(I=n?-1:1,un()):I<0},rn.reflectY=function(n){return arguments.length?(K=n?-1:1,un()):K<0},rn.precision=function(n){return arguments.length?(v=fn(g,en=n*n),cn()):d(en)},rn.fitExtent=function(n,t){return an(rn,n,t)},rn.fitSize=function(n,t){return function(n,t,e){return an(n,[[0,0],t],e)}(rn,n,t)},rn.fitWidth=function(n,t){return function(n,t,e){return ln(n,(function(e){var i=+t,r=i/(e[1][0]-e[0][0]),o=(i-r*(e[1][0]+e[0][0]))/2,u=-r*e[0][1];n.scale(150*r).translate([o,u])}),e)}(rn,n,t)},rn.fitHeight=function(n,t){return function(n,t,e){return ln(n,(function(e){var i=+t,r=i/(e[1][1]-e[0][1]),o=-r*e[0][0],u=(i-r*(e[1][1]+e[0][1]))/2;n.scale(150*r).translate([o,u])}),e)}(rn,n,t)},function(){return i=t.apply(this,arguments),rn.invert=i.invert&&on,un()}}((function(){return t}))()}function gn(n,t){return[f(t)*h(n),h(t)]}gn.invert=(hn=v,function(n,t){var e=d(n*n+t*t),i=hn(e),r=h(i),o=f(i);return[s(n*r,e*o),v(e&&t*r/e)]});var Sn,yn,mn,En,Mn=new _,_n=new _,wn={point:g,lineStart:g,lineEnd:g,polygonStart:function(){wn.lineStart=xn,wn.lineEnd=Ln},polygonEnd:function(){wn.lineStart=wn.lineEnd=wn.point=g,Mn.add(a(_n)),_n=new _},result:function(){var n=Mn/2;return Mn=new _,n}};function xn(){wn.point=Cn}function Cn(n,t){wn.point=bn,Sn=mn=n,yn=En=t}function bn(n,t){_n.add(En*n-mn*t),mn=n,En=t}function Ln(){bn(Sn,yn)}var Nn,Pn,$n,kn,Tn=wn,jn=0,Rn=0,zn=0,Dn=0,Fn=0,Gn=0,Yn=0,On=0,Xn=0,Zn={point:qn,lineStart:An,lineEnd:Wn,polygonStart:function(){Zn.lineStart=Bn,Zn.lineEnd=Hn},polygonEnd:function(){Zn.point=qn,Zn.lineStart=An,Zn.lineEnd=Wn},result:function(){var n=Xn?[Yn/Xn,On/Xn]:Gn?[Dn/Gn,Fn/Gn]:zn?[jn/zn,Rn/zn]:[NaN,NaN];return jn=Rn=zn=Dn=Fn=Gn=Yn=On=Xn=0,n}};function qn(n,t){jn+=n,Rn+=t,++zn}function An(){Zn.point=Un}function Un(n,t){Zn.point=Vn,qn($n=n,kn=t)}function Vn(n,t){var e=n-$n,i=t-kn,r=d(e*e+i*i);Dn+=r*($n+n)/2,Fn+=r*(kn+t)/2,Gn+=r,qn($n=n,kn=t)}function Wn(){Zn.point=qn}function Bn(){Zn.point=In}function Hn(){Kn(Nn,Pn)}function In(n,t){Zn.point=Kn,qn(Nn=$n=n,Pn=kn=t)}function Kn(n,t){var e=n-$n,i=t-kn,r=d(e*e+i*i);Dn+=r*($n+n)/2,Fn+=r*(kn+t)/2,Gn+=r,Yn+=(r=kn*n-$n*t)*($n+n),On+=r*(kn+t),Xn+=3*r,qn($n=n,kn=t)}var Jn=Zn;function Qn(n){this._context=n}Qn.prototype={_radius:4.5,pointRadius:function(n){return this._radius=n,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(n,t){switch(this._point){case 0:this._context.moveTo(n,t),this._point=1;break;case 1:this._context.lineTo(n,t);break;default:this._context.moveTo(n+this._radius,t),this._context.arc(n,t,this._radius,0,o)}},result:g};var nt,tt,et,it,rt,ot=new _,ut={point:g,lineStart:function(){ut.point=lt},lineEnd:function(){nt&&at(tt,et),ut.point=g},polygonStart:function(){nt=!0},polygonEnd:function(){nt=null},result:function(){var n=+ot;return ot=new _,n}};function lt(n,t){ut.point=at,tt=it=n,et=rt=t}function at(n,t){it-=n,rt-=t,ot.add(d(it*it+rt*rt)),it=n,rt=t}var ct=ut;let st,ft,ht,pt;class dt{constructor(n){this._append=null==n?vt:function(n){const t=Math.floor(n);if(!(t>=0))throw new RangeError(`invalid digits: ${n}`);if(t>15)return vt;if(t!==st){const n=10**t;st=t,ft=function(t){let e=1;this._+=t[0];for(const i=t.length;e<i;++e)this._+=Math.round(arguments[e]*n)/n+t[e]}}return ft}(n),this._radius=4.5,this._=""}pointRadius(n){return this._radius=+n,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){0===this._line&&(this._+="Z"),this._point=NaN}point(n,t){switch(this._point){case 0:this._append`M${n},${t}`,this._point=1;break;case 1:this._append`L${n},${t}`;break;default:if(this._append`M${n},${t}`,this._radius!==ht||this._append!==ft){const n=this._radius,t=this._;this._="",this._append`m0,${n}a${n},${n} 0 1,1 0,${-2*n}a${n},${n} 0 1,1 0,${2*n}z`,ht=n,ft=this._append,pt=this._,this._=t}this._+=pt}}result(){const n=this._;return this._="",n.length?n:null}}function vt(n){let t=1;this._+=n[0];for(const e=n.length;t<e;++t)this._+=arguments[t]+n[t]}var gt,St,yt,mt,Et={sphere:g,point:g,lineStart:function(){Et.point=_t,Et.lineEnd=Mt},lineEnd:g,polygonStart:g,polygonEnd:g};function Mt(){Et.point=Et.lineEnd=g}function _t(n,t){St=n*=l,yt=h(t*=l),mt=f(t),Et.point=wt}function wt(n,t){n*=l;var e=h(t*=l),i=f(t),r=a(n-St),o=f(r),u=i*h(r),c=mt*e-yt*i*o,p=yt*e+mt*i*o;gt.add(s(d(u*u+c*c),p)),St=n,yt=e,mt=i}var xt=[null,null],Ct={type:"LineString",coordinates:xt};function bt(n,t){return xt[0]=n,xt[1]=t,function(n){return gt=new _,Q(n,Et),+gt}(Ct)}var Lt={Feature:function(n,t){return Pt(n.geometry,t)},FeatureCollection:function(n,t){for(var e=n.features,i=-1,r=e.length;++i<r;)if(Pt(e[i].geometry,t))return!0;return!1}},Nt={Sphere:function(){return!0},Point:function(n,t){return $t(n.coordinates,t)},MultiPoint:function(n,t){for(var e=n.coordinates,i=-1,r=e.length;++i<r;)if($t(e[i],t))return!0;return!1},LineString:function(n,t){return kt(n.coordinates,t)},MultiLineString:function(n,t){for(var e=n.coordinates,i=-1,r=e.length;++i<r;)if(kt(e[i],t))return!0;return!1},Polygon:function(n,t){return Tt(n.coordinates,t)},MultiPolygon:function(n,t){for(var e=n.coordinates,i=-1,r=e.length;++i<r;)if(Tt(e[i],t))return!0;return!1},GeometryCollection:function(n,t){for(var e=n.geometries,i=-1,r=e.length;++i<r;)if(Pt(e[i],t))return!0;return!1}};function Pt(n,t){return!(!n||!Nt.hasOwnProperty(n.type))&&Nt[n.type](n,t)}function $t(n,t){return 0===bt(n,t)}function kt(n,e){for(var i,r,o,u=0,l=n.length;u<l;u++){if(0===(r=bt(n[u],e)))return!0;if(u>0&&(o=bt(n[u],n[u-1]))>0&&i<=o&&r<=o&&(i+r-o)*(1-Math.pow((i-r)/o,2))<t*o)return!0;i=r}return!1}function Tt(n,t){return!!k(n.map(jt),Rt(t))}function jt(n){return(n=n.map(Rt)).pop(),n}function Rt(n){return[n[0]*l,n[1]*l]}function zt(n,t){return(n&&Lt.hasOwnProperty(n.type)?Lt[n.type]:Pt)(n,t)}function Dt(n,t){if(n=function(n){let t;for(;t=n.sourceEvent;)n=t;return n}(n),void 0===t&&(t=n.currentTarget),t){var e=t.ownerSVGElement||t;if(e.createSVGPoint){var i=e.createSVGPoint();return i.x=n.clientX,i.y=n.clientY,[(i=i.matrixTransform(t.getScreenCTM().inverse())).x,i.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[n.clientX-r.left-t.clientLeft,n.clientY-r.top-t.clientTop]}}return[n.pageX,n.pageY]}var Ft={hide(n){n.style.visibility="hidden"},show(n,t){n.style.visibility="visible",n.innerText=t}};const Gt=[0,0],Yt="#fff",Ot="#ff571b";const Xt=document.querySelector("#selected-countries-list-container");new class{constructor(t,e,i){this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.width=this.canvas.offsetWidth,this.height=this.canvas.offsetHeight,this.tooltip=e,this.scale=250,this.rotation=Gt,this.geojson={},this.state={clickedLocation:null,hoveredLocation:null,selectedCountries:[]},this.dragStartedTime=null,this.handleMouseDown=this.handleMouseDown.bind(this),this.handleMouseMove=this.handleMouseMove.bind(this),this.handleMouseUp=this.handleMouseUp.bind(this),this.handleZoom=this.handleZoom.bind(this),this.projection=vn(gn).scale(249.5).clipAngle(90+n),this.geoGenerator=function(n,t){let e,i,r=3,o=4.5;function u(n){return n&&("function"==typeof o&&i.pointRadius(+o.apply(this,arguments)),Q(n,e(i))),i.result()}return u.area=function(n){return Q(n,e(Tn)),Tn.result()},u.measure=function(n){return Q(n,e(ct)),ct.result()},u.bounds=function(n){return Q(n,e(un)),un.result()},u.centroid=function(n){return Q(n,e(Jn)),Jn.result()},u.projection=function(t){return arguments.length?(e=null==t?(n=null,X):(n=t).stream,u):n},u.context=function(n){return arguments.length?(i=null==n?(t=null,new dt(r)):new Qn(t=n),"function"!=typeof o&&i.pointRadius(o),u):t},u.pointRadius=function(n){return arguments.length?(o="function"==typeof n?n:(i.pointRadius(+n),+n),u):o},u.digits=function(n){if(!arguments.length)return r;if(null==n)r=null;else{const t=Math.floor(n);if(!(t>=0))throw new RangeError(`invalid digits: ${n}`);r=t}return null===t&&(i=new dt(r)),u},u.projection(n).digits(r).context(t)}().projection(this.projection).context(this.ctx),this.canvas.addEventListener("mousedown",this.handleMouseDown),this.canvas.addEventListener("mouseup",this.handleMouseUp),this.canvas.addEventListener("mousemove",this.handleMouseMove),this.canvas.addEventListener("wheel",this.handleZoom),this.onCountriesChange=i}get clickedLocation(){return this.state.clickedLocation}set clickedLocation(n){this.state.clickedLocation=n}get hoveredLocation(){return this.state.hoveredLocation}set hoveredLocation(n){this.state.hoveredLocation=n}get selectedCountries(){return this.state.selectedCountries}isCountrySelected(n){return this.state.selectedCountries.findIndex((t=>t.name===n.name))>-1}addToSelectedCountries(n){return this.isCountrySelected(n)||this.state.selectedCountries.push(n),this.onCountriesChange(this.selectedCountries),this.state.selectedCountries}removeFromSelectedCountries(n){return this.state.selectedCountries=this.state.selectedCountries.filter((t=>t.name!==n.name)),this.onCountriesChange(this.selectedCountries),n}update(){const{projection:n,ctx:t,width:e,height:i,geojson:r,scale:o,rotation:u,geoGenerator:l,clickedLocation:a,hoveredLocation:c,tooltip:s}=this;t.clearRect(0,0,e,i),Ft.hide(s),n.fitSize([e,i],r),n.scale(o),n.rotate(u),t.beginPath(),t.strokeStyle="#ccc",t.fillStyle="rgb(14, 90, 197)",l({type:"Sphere"}),t.stroke(),t.fill();for(let n=0;n<r.features.length;n+=1){const e=r.features[n];t.beginPath(),t.lineWidth=.45,t.strokeStyle="#cbcbcb",t.fillStyle=Yt,c&&zt(e,c)&&(t.fillStyle="rgb(255, 240, 72)",Ft.show(s,e.properties.name)),this.isCountrySelected(e.properties)&&(t.fillStyle=Ot),a&&zt(e,a)&&(this.isCountrySelected(e.properties)?(this.removeFromSelectedCountries(e.properties),t.fillStyle=Yt):(this.addToSelectedCountries(e.properties),t.fillStyle=Ot),this.clickedLocation=null),l(e),t.stroke(),t.fill()}}handleMouseDown(){this.dragStartedTime=Date.now()}handleMouseMove(n){const{dragStartedTime:t,scale:e,rotation:i}=this;if(t){const t=e>800?.1:.3,r=n.movementX*t,o=n.movementY*t,[u,l]=i;this.rotation=[(u+r)%360,(l-o)%360]}else{const t=Dt(n,this.canvas);this.hoveredLocation=this.projection.invert(t)}this.update()}handleMouseUp(n){const{dragStartedTime:t,projection:e}=this;if(!t||Date.now()-t<150){const t=Dt(n,this.canvas);this.clickedLocation=e.invert(t),this.update()}this.dragStartedTime=null}handleZoom(n){n.preventDefault(),n.ctrlKey&&(this.scale-=.5*n.deltaY,this.scale>1800&&(this.scale=1800),this.scale<130&&(this.scale=130),this.update())}async initialize(){const n=await fetch("https://gist.githubusercontent.com/artemplv/be8ebf292a4433944f3948b06732a6cc/raw/95e446a098596eb51cc9734e8b9e12ec8e1781d9/110m_countries.json");this.geojson=await n.json(),this.update()}}(document.querySelector("#map"),document.querySelector("#map-tooltip"),(n=>{const t=document.createElement("ul");for(let e=0;e<n.length;e+=1){const i=document.createElement("li");i.innerText=`${n[e].name}, ${n[e].currencyCode||""}`,t.appendChild(i)}Xt.replaceChildren(t)})).initialize()}()}();
//# sourceMappingURL=main.js.map